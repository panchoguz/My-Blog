[
  {
    "path": "posts/2021-04-08-evolucin-del-precio-del-cobre/",
    "title": "Evolución precio del cobre",
    "description": "El siguiente post...",
    "author": [
      {
        "name": "Francisco Guzmán",
        "url": "https://example.com/panguz"
      }
    ],
    "date": "2021-04-09",
    "categories": [
      "ggplot2",
      "Cobre"
    ],
    "contents": "\r\n\r\nContents\r\nResultado esperado\r\nPaso a paso\r\nBase de datos\r\nLibrerías\r\nImportamos base\r\nGráfico\r\nggplot()/geom_line()\r\nlabs()\r\ntheme_minimal()\r\ntheme()\r\nannotate()\r\ngeom_point()/geom_text()\r\nannotate()\r\ngeom_hline()/geom_text\r\n\r\n\r\nCódigo gráfico\r\nReferencias\r\n\r\n\r\nbody {\r\ntext-align: justify}\r\nResultado esperado\r\n\r\n\r\n\r\nPaso a paso\r\nBase de datos\r\nDebemos ir a Precios de los Metales e Inventarios y descargar los datos. En este caso, trabajaremos con el precio mensual del período Ene2000-Mar2021 (LME).\r\nLibrerías\r\nDeben haber sido previamente instaladas con el comando install.packages().\r\n\r\n\r\nlibrary(readxl)\r\nlibrary(ggplot2)\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\n\r\n\r\n\r\nImportamos base\r\nDebemos fijarnos en que la base esté guardada en formato .xlsx, al decargarla puede haber quedado en algún otro formato. Luego de importar, realizamos algunas modificaciones.\r\n\r\n\r\ndf <- read_excel(\"datos.xlsx\")\r\n\r\nnames(df)[1] <- \"Fecha\"\r\nnames(df)[2] <- \"Precio\"\r\n\r\ndf$Fecha <- as.Date(df$Fecha)\r\n\r\n\r\n\r\nGráfico\r\nggplot()/geom_line()\r\nComenzamos con un gráfico simple.\r\n\r\n\r\ngraph <- ggplot(data = df, aes(Fecha, Precio)) +\r\n  geom_line(colour = \"navy\")\r\ngraph\r\n\r\n\r\n\r\n\r\nlabs()\r\nPodemos agregar título, subtítulo, entre otras cosas.\r\n\r\n\r\ngraph <- graph + labs(title = \"Precio Nominal Cobre Mensual (¢/lb)\",\r\n                     subtitle = \"Período 2000-2021\",\r\n       caption = \"Fuente: Elaboración propia en base a datos de Cochilco\",\r\n       tag = \"\",\r\n       x = \"\",\r\n       y = \"\")\r\ngraph\r\n\r\n\r\n\r\n\r\ntheme_minimal()\r\nAñadimos un tema. Ver más opciones en Complete themes.\r\n\r\n\r\ngraph <- graph + theme_minimal()\r\ngraph\r\n\r\n\r\n\r\n\r\ntheme()\r\nEditamos el tema: tamaño del título, subtítulo, fuente, margen, etc. Ver Modify components of a theme para más detalles.\r\n\r\n\r\ngraph <- graph +\r\n  theme(plot.title = element_text(size = rel(1.35)),\r\n        plot.subtitle = element_text(size = rel(1), margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(hjust = 0, face= \"italic\"))\r\ngraph\r\n\r\n\r\n\r\n\r\nannotate()\r\nAgregamos un rectángulo sombreado para identificar algún período más relevante dentro del gráfico.\r\n\r\n\r\ngraph <- graph +\r\n  annotate(\"rect\", fill = \"darkgreen\", alpha = 0.2,\r\n           xmin = as.Date(\"2009-11-01\"), xmax = as.Date(\"2013-05-01\"),\r\n           ymin = -Inf, ymax = Inf)\r\ngraph\r\n\r\n\r\n\r\n\r\ngeom_point()/geom_text()\r\nPodemos identificar un punto máximo y colocar una etiqueta. Creamos graph2 porque no añadiremos esto en nuestro gráfico pirncipal.\r\n\r\n\r\npmax <- df %>% #precio máximo\r\n  slice(which.max(Precio))\r\n\r\ngraph2 <- graph +\r\n  geom_point(data = pmax, aes(x = Fecha, y = Precio), col = \"red\",\r\n             shape = 21, fill = NA, size = 4, stroke = 1.1) +\r\n  geom_text(data = pmax, aes(x = Fecha, y = Precio,\r\n                label = sprintf(\"%0.1f\", round(Precio, digits = 3))),\r\n            size = 2.5, vjust = 0, hjust = -0.5)\r\ngraph2\r\n\r\n\r\n\r\n\r\nannotate()\r\nVolvemos a utilizar graph. Añadimos un texto con información adicional sobre el período destacado. Ver Create an annotation layer para más detalles.\r\n\r\n\r\ngraph <- graph + \r\n  annotate(geom=\"text\",x=as.Date(\"2011-08-01\"),\r\n           y=490, label=\"superciclo 09'-13'\", fontface=\"plain\", size=3)\r\ngraph\r\n\r\n\r\n\r\n\r\ngeom_hline()/geom_text\r\nFinalmente, podemos agregar una línea con el valor actual del cobre (el más reciente en los datos descargados) y crear la etiqueta correspondiente.\r\n\r\n\r\nplast <- df %>% #precio más reciente\r\n  slice(which.max(Fecha))\r\n\r\ngraph <- graph +\r\n  geom_hline(yintercept = tail(df$Precio, n=1), linetype=\"dashed\",\r\n             color = \"red\", size = .5) +\r\n  geom_text(data = plast,\r\n            aes(x = Fecha, y = Precio,\r\n                label = sprintf(\"%0.1f\", round(Precio, digits = 3))), size = 3,\r\n            vjust = -.5, hjust = .5, col = \"red\")\r\ngraph\r\n\r\n\r\n\r\n\r\nCódigo gráfico\r\n\r\n\r\nplast <- df %>% #precio más reciente\r\n  slice(which.max(Fecha))\r\n\r\nggplot(data = df, aes(Fecha, Precio)) +\r\n  geom_line(colour = \"navy\")+ \r\n  labs(title = \"Precio Nominal Cobre Mensual (¢/lb)\",\r\n                      subtitle = \"Período 2000-2021\",\r\n                      caption = \"Fuente: Elaboración propia en base a datos de Cochilco\",\r\n                      tag = \"\",\r\n                      x = \"\",\r\n                      y = \"\") + \r\n  theme_minimal() +\r\n  theme(plot.title = element_text(size = rel(1.35)),\r\n        plot.subtitle = element_text(size = rel(1), margin=margin(0,0,20,0)),\r\n        plot.caption = element_text(hjust = 0, face= \"italic\")) +\r\n  annotate(\"rect\", fill = \"darkgreen\", alpha = 0.2,\r\n           xmin = as.Date(\"2009-11-01\"), xmax = as.Date(\"2013-05-01\"),\r\n           ymin = -Inf, ymax = Inf) +\r\n  annotate(geom=\"text\",x=as.Date(\"2011-08-01\"),\r\n           y=490, label=\"superciclo 09'-13'\", fontface=\"plain\", size=3) +\r\n  geom_hline(yintercept = tail(df$Precio, n=1), linetype=\"dashed\",\r\n             color = \"red\", size = .5) +\r\n  geom_text(data = plast,\r\n            aes(x = Fecha, y = Precio,\r\n                label = sprintf(\"%0.1f\", round(Precio, digits = 3))), size = 3,\r\n            vjust = -.5, hjust = .5, col = \"red\")\r\n\r\n\r\n\r\nReferencias\r\nggplot2\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-08-evolucin-del-precio-del-cobre/distill-preview.png",
    "last_modified": "2021-04-09T11:49:05-04:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/2021-04-07-ps-1/",
    "title": "Sindicatos",
    "description": "El siguiente post desarrolla un ejercicio de un problem set del curso ENMIC405 otoño 2020.",
    "author": [
      {
        "name": "Francisco Guzmán",
        "url": "https://example.com/panchoguz"
      }
    ],
    "date": "2021-04-08",
    "categories": [
      "Economía Laboral",
      "Microeconomía III"
    ],
    "contents": "\r\n\r\nContents\r\na) Compare las características del sindicalismo en Chile respecto a la OCDE.\r\n\r\n\r\nbody {\r\ntext-align: justify}\r\nEn este sección se le solicita estudiar los efectos del alza del precio del cobre durante los años 2009 a 2013 (superciclo cobre) en el nivel de sindicalización en determinadas industrias. Para esto, usted dispone de los datos recopilados por la Encuesta Laboral (ENCLA) de la Dirección del Trabajo, para los años 2008, 2011 y 2014.\r\na) Compare las características del sindicalismo en Chile respecto a la OCDE.\r\nUtilizaremos el siguiente paquete, el cual debe estar previamente instalado con el comando install.packages(“OECD”):\r\n\r\n\r\nlibrary(OECD)\r\n\r\n\r\n\r\nA menos que conozcamos el código exacto de la base a utilizar, se recomienda crear un dataframe con todas las bases disponibles y buscar en ella la base que nos sirva.\r\n\r\n\r\ndf <- get_datasets()\r\nsearch_dataset(\"union\", data = df)\r\n\r\n\r\n       id                                                  title\r\n34    TUD                                            Trade Union\r\n231 REVEU [Discontinued] VAT and Customs duties - European Union\r\n\r\nDescargamos y exploramos la base de interés. Para esto último, utilizamos el comando describe(), para el cual debe estar instalado el paquete Hmisc:\r\n\r\n\r\ndf <- get_dataset(\"TUD\")\r\nattach(df)\r\n\r\nlibrary(Hmisc)\r\ndescribe(df)\r\n\r\ntable(COU)\r\n\r\n\r\n\r\nLuego de analizar, realizamos unos filtros para quedarnos con las variables y categorías de interés:\r\n\r\n\r\nlibrary(dplyr)\r\ndf <- subset(df, select = c(\"COU\", \"SOURCE\", \"UNIT\", \"obsTime\", \"obsValue\")) %>%\r\n  filter(COU %in% c(\"CHL\", \"GRC\", \"POL\", \"TUR\"), UNIT == \"PC\", obsTime>2000)\r\n\r\n\r\n\r\nGraficamos:\r\n\r\n\r\nggplot(df, aes(obsTime, obsValue, group = COU)) +\r\n  geom_line(aes(color = COU)) +\r\n  labs(title = \"Tasa de Sindicalización\", subtitle = \"Período 2000-2018\", caption = \"Fuente: Elaboración propia\") +\r\n  xlab(\"Año\") + ylab(\"Tasa (%)\") + scale_x_discrete(breaks = c(2001, 2005, 2009, 2013, 2017)) +\r\n  scale_y_continuous(limits = c(0, 30)) + theme_minimal()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-07-ps-1/distill-preview.png",
    "last_modified": "2021-04-08T16:13:10-04:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/2021-04-07-regresin-lineal-en-r/",
    "title": "Regresión Lineal en R",
    "description": "El siguiente post desarrolla una guía de ejercicios del profesor Víctor Macías.",
    "author": [
      {
        "name": "Francisco Guzmán",
        "url": "https://example.com/panchoguz"
      }
    ],
    "date": "2021-04-08",
    "categories": [
      "regresion lineal"
    ],
    "contents": "\r\n\r\nContents\r\nPregunta 1\r\na) Relación entre \\(roe\\) y salarios:\r\nb) Estimación MCO\r\nc) Gráfico de regresión\r\n\r\n\r\n\r\nbody {\r\ntext-align: justify}\r\nPregunta 1\r\nLa base de datos ceosal1.dta contiene información correspondiente al año 1990, sobre 209 CEO. Los datos son usados en el libro “Introducción a la econometría” de Jeffrey Wooldridge.\r\nUsando estos datos se estimará el siguiente modelo que muestra la relación entre el rendimiento sobre el capital y el sueldo anual que reciben los CEO:\r\n\\[salary=\\beta_0+\\beta_1roe+u\\] donde el parámetro de interés es \\(\\beta_1\\) que mide la variación del sueldo anual, en miles de dólares, que corresponde a un incremento de un punto porcentual en el rendimiento sobre el capital.\r\na) Relación entre \\(roe\\) y salarios:\r\n\r\n\r\ng1 <- ceosal1 %>% ggplot(aes(x = roe, y = salary)) + geom_point() +\r\nlabs(x = \"Rendimiento sobre el capital (%)\", y = \"Salario de CEO (miles de dólares)\") + theme_bw()\r\ng1\r\n\r\n\r\n\r\n\r\nb) Estimación MCO\r\n\r\n\r\nmodel <- lm(salary ~ roe, data = ceosal1)\r\nsummary(model)\r\n\r\n\r\n\r\nCall:\r\nlm(formula = salary ~ roe, data = ceosal1)\r\n\r\nResiduals:\r\n    Min      1Q  Median      3Q     Max \r\n-1160.2  -526.0  -254.0   138.8 13499.9 \r\n\r\nCoefficients:\r\n            Estimate Std. Error t value Pr(>|t|)    \r\n(Intercept)   963.19     213.24   4.517 1.05e-05 ***\r\nroe            18.50      11.12   1.663   0.0978 .  \r\n---\r\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\r\n\r\nResidual standard error: 1367 on 207 degrees of freedom\r\nMultiple R-squared:  0.01319,   Adjusted R-squared:  0.008421 \r\nF-statistic: 2.767 on 1 and 207 DF,  p-value: 0.09777\r\n\r\nc) Gráfico de regresión\r\n\r\n\r\ng2<- ggplot(ceosal1, aes(x = roe, y = salary)) + geom_point() +\r\ngeom_smooth(method = \"lm\", se = FALSE, color = \"red\") +\r\nlabs(x = \"Rendimiento sobre el capital (%)\", y = \"Salario CEO (miles de dólares)\") +\r\ntheme_bw()\r\ng2\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-07-regresin-lineal-en-r/distill-preview.png",
    "last_modified": "2021-04-08T19:47:57-04:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  }
]
